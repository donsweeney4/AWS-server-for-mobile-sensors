<!DOCTYPE html>
<html>
<head>
    <script src="{{ url_for('static', filename='js/error-logger.js') }}"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Essential for responsive design -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>Livermore Urban Heat Island Mapping</title>
    <!-- Using Inter as recommended, with Roboto as a fallback for consistency -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Prefer Inter, fall back to Roboto if not available */
            margin: 0; /* Reset default body margin */
            padding: 0; /* Reset default body padding */
            display: flex; /* Use flexbox for overall layout */
            flex-direction: column; /* Stack elements vertically */
            min-height: 100vh; /* Ensure body takes full viewport height */
            background-color: #f0f4f8; /* Light background color for the main page */
            color: #333; /* Default text color */
        }

        h1 {
            text-align: center;
            margin: 20px 0 15px; /* Top, horizontal, bottom margin */
            color: #2c3e50;
            font-size: 2.5em; /* Larger, more prominent title */
        }

        .logo {
            display: block;
            margin: 0 auto 20px; /* Center the logo and add bottom margin */
            max-width: 150px; /* Limit logo size */
            height: auto;
        }

        .button-container {
            text-align: center; /* Center the buttons */
            margin-bottom: 15px; /* Space below buttons */
        }

        button {
            background-color: #007BFF; /* Bootstrap blue */
            color: yellow; /* High contrast for readability */
            font-size: 1.1em; /* Slightly larger font */
            border: none;
            padding: 10px 20px; /* Generous padding for easier clicking */
            margin: 5px; /* Space between buttons */
            cursor: pointer;
            border-radius: 8px; /* More rounded corners */
            transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth transitions */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
            font-weight: 700; /* Bold text */
        }
        
        button:disabled {
            background-color: #a0cffc; /* Lighter blue when disabled */
            color: #ccc; /* Greyer text for disabled state */
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        button:hover:enabled {
            background-color: #0056b3; /* Darker blue on hover */
            transform: translateY(-2px); /* Slight lift effect */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        /* Iframe styling for responsive and constrained content */
        iframe {
            flex-grow: 1; /* Allow iframe to take up available vertical space */
            width: 100%;
            /* Calculate height: 100vh - (approximate height of header + buttons + banner + margins) */
            /* You might need to fine-tune the '250px' based on exact rendering */
            height: calc(100vh - 300px); 
            border: none;
            overflow: auto; /* Ensures scrollbars appear if content is larger than calculated height */
            z-index: 200;
            display: block;
            margin: 0 auto; /* Center horizontally if width is less than 100% */
            border-radius: 8px; /* Match button/table style */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .banner {
            text-align: center;
            background-color: #34495e; /* Darker blue/grey for banner */
            color: #ecf0f1;
            padding: 15px 0;
            margin-top: 20px; /* Space above the banner */
            font-size: 1.2em;
            font-weight: 700;
            width: 100%;
        }
    </style>

</head>

<body>
    <h1> Urban Heat Island Study</h1>

    <img src="{{ url_for('static', filename='QuestLogo.png') }}" alt="Quest Science Center Logo" class="logo">
    
    <div class="button-container">
        <!-- Buttons -->
        <button id="locationBtn" onclick="handleLocation()">Location</button>
        <button id="campaignBtn" onclick="loadIframe('/campaign')" disabled>Select Campaign</button>
        <button id="processBtn" onclick="loadIframe('/renderprocessdata')" disabled>(Re)Process Sensor Data</button>
        <button id="heatmapBtn" onclick="loadIframe('/map')" disabled>Temperature Map by Route</button> 
        <button id="tempPlotBtn" onclick="loadIframe('/temperatureplot')" disabled>Sensor Temperatures </button>
        <button id="metadataBtn" onclick="loadIframe('/metadata')" disabled>Metadata</button> <!-- Changed to loadIframe -->
        <button id="downloadBtn" onclick="loadIframe('/download-and-zip')" disabled>Download Campaign</button>
        <button id="manualBtn" onclick="window.open('https://docs.google.com/document/d/1SpkF4H2mIHgj6nMIVavMxqKRo78LIeTwOELwh8MliLA/edit?tab=t.0', '_blank')" style="background-color: yellow; color: blue;">User's Manual</button>
        <!-- <button id="arcgisBtn" onclick="loadIframe('/arcgis')" disabled>Prepare ArcGIS data </button>-->

    </div>

    <!-- Load HTML content into this iframe -->
    <iframe 
        id="contentFrame"
        scrolling="yes"
        onload="console.log('âœ… iframe loaded:', this.src)"
        onerror="console.error('âŒ iframe failed to load:', this.src)">
    </iframe>
    
    <!--
    <div class="banner">Tri-Valley Youth Climate Action Project</div>
    -->

    <script>
        /**
         * Loads a given endpoint URL into the content iframe.
         * @param {string} endpoint - The URL to load.
         */
        function loadIframe(endpoint) {
            console.log("ðŸ”„ In index.html: loadIframe triggered with:", endpoint);
            document.getElementById('contentFrame').src = endpoint;
        }

        /**
         * 
         * This function should be called once on page load.
         */
        function handleLocation() {
            loadIframe('/location'); // Use loadIframe here for consistency
            
            // Enable the relevant buttons after initial load
            document.getElementById('campaignBtn').disabled = false;
            document.getElementById('processBtn').disabled = false;
            document.getElementById('heatmapBtn').disabled = false;
            document.getElementById('tempPlotBtn').disabled = false;
            document.getElementById('metadataBtn').disabled = false; // 
            document.getElementById('downloadBtn').disabled = false;
            //document.getElementById('arcgisBtn').disabled = false; // Enable arcgis button
        }

        // Execute handleLocation once the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log("ðŸš€ DOMContentLoaded event fired, calling  handleLocation()");
            handleLocation();
        });

    </script>
</body>
</html>
